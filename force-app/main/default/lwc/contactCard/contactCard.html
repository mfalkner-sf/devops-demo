<template>
  <!-- Contact Card - Header Section -->
  <lightning-card icon-name="standard:contact" title="Contact Card">
    <div class="slds-p-horizontal_medium slds-p-vertical_small">
      <!-- Top section: avatar and primary details -->
      <div class="slds-grid slds-wrap slds-gutters slds-align_absolute-center">
        <div
          class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3 slds-align_absolute-center"
        >
          <img
            class="contact-avatar"
            src={contact.avatarUrl}
            alt="Contact avatar"
          />
        </div>

        <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-3">
          <!-- Name and role -->
          <div
            class="slds-text-heading_medium slds-truncate slds-m-bottom_xx-small"
            title={contact.name}
          >
            {contact.name}
          </div>
          <div class="slds-text-title slds-m-bottom_small slds-text-color_weak">
            {contact.role}
          </div>

          <!-- Contact info -->
          <div class="slds-grid slds-wrap slds-gutters">
            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
              <p class="slds-m-bottom_x-small">
                <lightning-icon
                  icon-name="utility:phone_portrait"
                  size="x-small"
                  class="slds-m-right_x-small"
                ></lightning-icon>
                <lightning-formatted-phone
                  value={contact.phone}
                ></lightning-formatted-phone>
              </p>
              <p class="slds-m-bottom_x-small">
                <lightning-icon
                  icon-name="utility:email"
                  size="x-small"
                  class="slds-m-right_x-small"
                ></lightning-icon>
                <lightning-formatted-email
                  value={contact.email}
                ></lightning-formatted-email>
              </p>
            </div>
            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
              <p class="slds-m-bottom_x-small slds-grid slds-align-top">
                <lightning-icon
                  icon-name="utility:home"
                  size="x-small"
                  class="slds-m-right_x-small"
                ></lightning-icon>
                <span>{contact.address.street}</span>
              </p>
              <p class="slds-text-color_weak">
                {contact.address.city}, {contact.address.state}
                {contact.address.postalCode}
              </p>
            </div>
          </div>

          <!-- Years as Property Owner -->
          <div class="slds-m-top_small">
            <p class="slds-text-title slds-m-right_x-small">
              Years as Property Owner:
              <span class="slds-text-title_bold">{contact.yearsAsManager}</span>
            </p>
          </div>
        </div>
      </div>
    </div>

    <lightning-layout class="slds-p-horizontal_medium slds-p-bottom_small">
      <lightning-layout-item size="12">
        <div class="slds-page-header slds-m-top_small slds-m-bottom_small">
          <div class="slds-page-header__row">
            <div class="slds-page-header__col-title">
              <div class="slds-media">
                <div class="slds-media__figure">
                  <lightning-icon
                    icon-name="utility:company"
                    alternative-text="Properties"
                    title="Properties"
                    size="small"
                  ></lightning-icon>
                </div>
                <div class="slds-media__body">
                  <h1
                    class="slds-page-header__title slds-truncate"
                    title="Owned Properties"
                  >
                    Owned Properties
                  </h1>
                  <p class="slds-text-body_small slds-text-color_weak">
                    Portfolio overview with open cases
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Properties Data Table Section -->
        <template if:true={properties}>
          <lightning-datatable
            key-field="id"
            data={properties}
            columns={columns}
            hide-checkbox-column
            show-row-number-column
          >
          </lightning-datatable>
        </template>
        <template if:false={properties}>
          <div class="slds-text-color_weak slds-p-vertical_small">
            No property data available.
          </div>
        </template>
      </lightning-layout-item>
    </lightning-layout>

    <!-- Footer with version (HTML versioning best practices: major.minor.patch) -->
    <div
      class="slds-p-horizontal_medium slds-p-vertical_x-small slds-border_top"
    >
      <span class="slds-text-color_weak slds-text-body_small">v1.1.0</span>
    </div>
  </lightning-card>
</template>
